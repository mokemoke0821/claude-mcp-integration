# GitHub Secretsè¨­å®šã‚¬ã‚¤ãƒ‰

## ğŸ” è¨­å®šæ‰‹é †

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®Secretsãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹
```
https://github.com/[username]/claude-code-action-integration/settings/secrets/actions
```

### 2. ä»¥ä¸‹ã®Secretsã‚’è¿½åŠ 

#### CLAUDE_ACCESS_TOKEN
- **Name**: `CLAUDE_ACCESS_TOKEN`
- **Secret**: `[npm run get:credentials ã§å–å¾—ã—ãŸ access_token]`
- **èª¬æ˜**: Claude APIã‚¢ã‚¯ã‚»ã‚¹ç”¨ã®èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³

#### CLAUDE_REFRESH_TOKEN  
- **Name**: `CLAUDE_REFRESH_TOKEN`
- **Secret**: `[npm run get:credentials ã§å–å¾—ã—ãŸ refresh_token]`
- **èª¬æ˜**: ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°ç”¨ã®ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³

#### CLAUDE_EXPIRES_AT
- **Name**: `CLAUDE_EXPIRES_AT`
- **Secret**: `[npm run get:credentials ã§å–å¾—ã—ãŸ expires_at]`
- **èª¬æ˜**: ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™ï¼ˆUnix timestampï¼‰

## ğŸ“‹ è©³ç´°è¨­å®šæ‰‹é †

### Step 1: èªè¨¼æƒ…å ±å–å¾—
```bash
npm run get:credentials
```

### Step 2: GitHub Secretsãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹
1. GitHubãƒªãƒã‚¸ãƒˆãƒªãƒšãƒ¼ã‚¸ã«ç§»å‹•
2. ã€ŒSettingsã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ã€ŒSecrets and variablesã€â†’ã€ŒActionsã€ã‚’ã‚¯ãƒªãƒƒã‚¯

### Step 3: Secretè¿½åŠ 
å„Secretã«ã¤ã„ã¦ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š
1. ã€ŒNew repository secretã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€ŒNameã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã« Secretåã‚’å…¥åŠ›
3. ã€ŒSecretã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å–å¾—ã—ãŸå€¤ã‚’å…¥åŠ›
4. ã€ŒAdd secretã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

## âœ… è¨­å®šç¢ºèª

è¨­å®šå®Œäº†å¾Œã€ä»¥ä¸‹ã§ç¢ºèªï¼š
```bash
npm run verify:secrets
```

## ğŸ”„ ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°

### è‡ªå‹•æ›´æ–°ï¼ˆæ¨å¥¨ï¼‰
grll/claude-code-actionã¯OAuthèªè¨¼ã‚’ä½¿ç”¨ã—ã¦è‡ªå‹•ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ›´æ–°ã—ã¾ã™ã€‚

### æ‰‹å‹•æ›´æ–°ï¼ˆå¿…è¦æ™‚ï¼‰
1. `npm run get:credentials` ã§æ–°ã—ã„å€¤ã‚’å–å¾—
2. GitHub Secretsãƒšãƒ¼ã‚¸ã§å€¤ã‚’æ›´æ–°
3. `npm run verify:secrets` ã§ç¢ºèª

## ğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„äº‹é …

### æ©Ÿå¯†æƒ…å ±ã®å–ã‚Šæ‰±ã„
- âœ… GitHub Secretsã§ã®ã¿ä¿å­˜
- âŒ ã‚³ãƒ¼ãƒ‰ã«ç›´æ¥è¨˜è¼‰ã—ãªã„
- âŒ ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ãªã„
- âŒ å…¬é–‹ãƒªãƒã‚¸ãƒˆãƒªã®Issue/PRã«è¨˜è¼‰ã—ãªã„

### ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†
- å¿…è¦æœ€å°é™ã®æ¨©é™ã®ã¿ä»˜ä¸
- å®šæœŸçš„ãªã‚¢ã‚¯ã‚»ã‚¹ç›£æŸ»å®Ÿæ–½
- ä¸è¦ã«ãªã£ãŸã‚‰å³åº§ã«å‰Šé™¤

### æœ‰åŠ¹æœŸé™ç®¡ç†
- å®šæœŸçš„ãªæœŸé™ç¢ºèªï¼ˆæ¨å¥¨ï¼šæœˆ1å›ï¼‰
- æœŸé™åˆ‡ã‚Œå‰ã®æ›´æ–°å®Ÿæ–½
- è‡ªå‹•æ›´æ–°æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª

## ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### èªè¨¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆ
1. **Secretåã®ç¢ºèª**
   - å¤§æ–‡å­—ãƒ»å°æ–‡å­—ã®æ­£ç¢ºæ€§
   - ã‚¹ãƒšãƒ¼ã‚¹ã‚„ç‰¹æ®Šæ–‡å­—ã®æœ‰ç„¡

2. **Secretå€¤ã®ç¢ºèª**
   - ã‚³ãƒ”ãƒ¼ãƒ»ãƒšãƒ¼ã‚¹ãƒˆæ™‚ã®æ”¹è¡Œæ··å…¥
   - æ–‡å­—æ•°ãƒ»å½¢å¼ã®æ­£ç¢ºæ€§

3. **æ¨©é™ã®ç¢ºèª**
   - ãƒªãƒã‚¸ãƒˆãƒªã®Secretè¨­å®šæ¨©é™
   - GitHub Appã®èªè¨¼çŠ¶æ…‹

### ã‚¨ãƒ©ãƒ¼åˆ¥å¯¾å‡¦æ³•

#### `401 Unauthorized`
```bash
# èªè¨¼æƒ…å ±ã®å†å–å¾—
npm run get:credentials

# Secretsã®å†è¨­å®š
# â†’ GitHub Secretsãƒšãƒ¼ã‚¸ã§å€¤ã‚’æ›´æ–°
```

#### `403 Forbidden`
```bash
# GitHub Appæ¨©é™ç¢ºèª
npm run verify:github-app

# ãƒªãƒã‚¸ãƒˆãƒªã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ç¢ºèª
# â†’ https://github.com/settings/installations
```

#### `Token expired`
```bash
# è‡ªå‹•æ›´æ–°ç¢ºèªï¼ˆé€šå¸¸ã¯è‡ªå‹•å®Ÿè¡Œï¼‰
# æ‰‹å‹•æ›´æ–°ãŒå¿…è¦ãªå ´åˆã®ã¿ï¼š
npm run get:credentials
# â†’ æ–°ã—ã„å€¤ã§Secretsæ›´æ–°
```

## ğŸ“Š è¨­å®šçŠ¶æ³ç¢ºèª

### è¨­å®šå®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] CLAUDE_ACCESS_TOKEN è¨­å®šæ¸ˆã¿
- [ ] CLAUDE_REFRESH_TOKEN è¨­å®šæ¸ˆã¿  
- [ ] CLAUDE_EXPIRES_AT è¨­å®šæ¸ˆã¿
- [ ] GitHub App ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆæˆåŠŸ

### ç¢ºèªã‚³ãƒãƒ³ãƒ‰
```bash
# å…¨ä½“ç¢ºèª
npm run test:integration

# å€‹åˆ¥ç¢ºèª
npm run verify:secrets
npm run verify:github-app
npm run sync
```

---

## ğŸ¯ è¨­å®šå®Œäº†å¾Œã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **ãƒ†ã‚¹ãƒˆIssueä½œæˆ**
   ```markdown
   @claude ã“ã‚“ã«ã¡ã¯ï¼çµ±åˆãƒ†ã‚¹ãƒˆã§ã™ã€‚
   
   ã“ã®Issueã§ GitHub Actions ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚
   ```

2. **ãƒ†ã‚¹ãƒˆPRä½œæˆ**
   ```bash
   # æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
   git checkout -b test/claude-integration
   
   # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
   echo "# Claudeçµ±åˆãƒ†ã‚¹ãƒˆ" > test-claude-integration.md
   git add . && git commit -m "test: Claudeçµ±åˆãƒ†ã‚¹ãƒˆç”¨ãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ "
   git push origin test/claude-integration
   
   # PRã§Claudeãƒ¡ãƒ³ã‚·ãƒ§ãƒ³
   @claude ã“ã®PRã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦æ”¹å–„ææ¡ˆã‚’ãŠé¡˜ã„ã—ã¾ã™
   ```

3. **æœ¬æ ¼é‹ç”¨é–‹å§‹**
   - å®Ÿéš›ã®é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã®æ´»ç”¨
   - ãƒãƒ¼ãƒ å†…ã§ã®ä½¿ç”¨æ–¹æ³•å…±æœ‰
   - ã‚«ã‚¹ã‚¿ãƒ æŒ‡ç¤ºã®èª¿æ•´ãƒ»æœ€é©åŒ– 